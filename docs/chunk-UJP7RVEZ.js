import{F as Nt,G as Bt,H as Wt,I as Xt,J as Kt,i as Dt,j as U}from"./chunk-SZXEPEF3.js";import{$ as It,A as Pt,Aa as jt,B as vt,Ba as Ut,Ca as Ht,D as Mt,H as Ot,K as xt,La as Vt,O as St,P as j,V as zt,W as kt,X as Tt,Y as wt,_ as Et,aa as Lt,ea as At,ga as Rt,h as ft,m as $,n as B,r as Ct,s as bt,sa as Ft,x as yt,z as w,za as $t}from"./chunk-LYXUAPCQ.js";import{$b as mt,Ab as lt,Ac as ht,Bb as K,Ca as v,Cc as _t,Da as M,Db as G,Fa as rt,Fb as f,Fc as x,G as nt,Gc as S,Ha as at,I as F,La as st,Mb as _,Nb as dt,O as ot,Ob as D,Oc as Z,Qb as gt,Tb as p,Vb as ut,Wb as N,Xb as L,Yb as c,Zb as s,_b as h,a as z,ac as pt,b as et,cc as O,fa as C,h as P,hc as b,ic as g,kb as ct,la as k,lb as E,ma as it,nc as Q,ob as a,oc as q,pc as Y,qa as X,r as A,ra as m,rc as d,sc as y,tc as T,w as R,zb as I}from"./chunk-4QRPNBAZ.js";var te=(n,e)=>({$implicit:n,data:e});function ee(n,e){n&1&&h(0,"nz-icon",3)}function ne(n,e){n&1&&h(0,"nz-icon",4)}function oe(n,e){n&1&&h(0,"nz-icon",5)}function ie(n,e){n&1&&h(0,"nz-icon",6)}function re(n,e){n&1&&h(0,"nz-icon",7)}function ae(n,e){if(n&1&&(mt(0),h(1,"span",9),pt()),n&2){let t=g();a(),_("innerHTML",t.instance.content,ct)}}function se(n,e){if(n&1){let t=O();c(0,"nz-message",2),b("destroyed",function(i){v(t);let r=g();return M(r.remove(i.id,i.userAction))}),s()}if(n&2){let t=e.$implicit;_("instance",t)}}var ce=0,J=class{overlay;injector;container;nzSingletonService=m(xt);constructor(e,t){this.overlay=e,this.injector=t}remove(e){this.container&&(e?this.container.remove(e):this.container.removeAll())}getInstanceId(){return`${this.componentPrefix}-${ce++}`}withContainer(e){let t=this.nzSingletonService.getSingletonWithKey(this.componentPrefix);if(t)return t;let o=this.overlay.create({hasBackdrop:!1,scrollStrategy:this.overlay.scrollStrategies.noop(),positionStrategy:this.overlay.position().global()}),i=new Lt(e,null,this.injector),r=o.attach(i),l=o.hostElement;return l.style.zIndex="1010",t||(this.container=t=r.instance,this.nzSingletonService.registerSingletonWithKey(this.componentPrefix,t),this.container.afterAllInstancesRemoved.subscribe(()=>{this.container=void 0,this.nzSingletonService.unregisterSingletonWithKey(this.componentPrefix),o.dispose()})),t}},le=(()=>{class n{config;instances=[];_afterAllInstancesRemoved=new P;afterAllInstancesRemoved=this._afterAllInstancesRemoved.asObservable();cdr=m(Z);nzConfigService=m(Ot);destroy$=new P;ngOnInit(){this.subscribeConfigChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}create(t){let o=this.onCreate(t);return this.instances.length>=this.config.nzMaxStack&&(this.instances=this.instances.slice(1)),this.instances=[...this.instances,o],this.readyInstances(),o}remove(t,o=!1){this.instances.map((i,r)=>({index:r,instance:i})).filter(({instance:i})=>i.messageId===t).forEach(({index:i,instance:r})=>{this.instances.splice(i,1),this.instances=[...this.instances],this.onRemove(r,o),this.readyInstances()}),this.instances.length||this.onAllInstancesRemoved()}removeAll(){this.instances.forEach(t=>this.onRemove(t,!1)),this.instances=[],this.readyInstances(),this.onAllInstancesRemoved()}onCreate(t){return t.options=this.mergeOptions(t.options),t.onClose=new P,t}onRemove(t,o){t.onClose.next(o),t.onClose.complete()}onAllInstancesRemoved(){this._afterAllInstancesRemoved.next(),this._afterAllInstancesRemoved.complete()}readyInstances(){this.cdr.detectChanges()}mergeOptions(t){let{nzDuration:o,nzAnimate:i,nzPauseOnHover:r}=this.config;return z({nzDuration:o,nzAnimate:i,nzPauseOnHover:r},t)}static \u0275fac=function(o){return new(o||n)};static \u0275dir=K({type:n})}return n})(),de=(()=>{class n{cdr=m(Z);animationStateChanged=new P;options;autoClose;closeTimer;userAction=!1;eraseTimer;eraseTimingStart;eraseTTL;ngOnInit(){this.options=this.instance.options,this.options.nzAnimate&&(this.instance.state="enter",this.animationStateChanged.pipe(nt(t=>t.phaseName==="done"&&t.toState==="leave"),ot(1)).subscribe(()=>{clearTimeout(this.closeTimer),this.destroyed.next({id:this.instance.messageId,userAction:this.userAction})})),this.autoClose=this.options.nzDuration>0,this.autoClose&&(this.initErase(),this.startEraseTimeout())}ngOnDestroy(){this.autoClose&&this.clearEraseTimeout(),this.animationStateChanged.complete()}onEnter(){this.autoClose&&this.options.nzPauseOnHover&&(this.clearEraseTimeout(),this.updateTTL())}onLeave(){this.autoClose&&this.options.nzPauseOnHover&&this.startEraseTimeout()}destroy(t=!1){this.userAction=t,this.options.nzAnimate?(this.instance.state="leave",this.cdr.detectChanges(),this.closeTimer=setTimeout(()=>{this.closeTimer=void 0,this.destroyed.next({id:this.instance.messageId,userAction:t})},200)):this.destroyed.next({id:this.instance.messageId,userAction:t})}initErase(){this.eraseTTL=this.options.nzDuration,this.eraseTimingStart=Date.now()}updateTTL(){this.autoClose&&(this.eraseTTL-=Date.now()-this.eraseTimingStart)}startEraseTimeout(){this.eraseTTL>0?(this.clearEraseTimeout(),this.eraseTimer=setTimeout(()=>this.destroy(),this.eraseTTL),this.eraseTimingStart=Date.now()):this.destroy()}clearEraseTimeout(){this.eraseTimer!==null&&(clearTimeout(this.eraseTimer),this.eraseTimer=void 0)}static \u0275fac=function(o){return new(o||n)};static \u0275dir=K({type:n})}return n})(),Gt=(()=>{class n extends de{instance;destroyed=new st;index;static \u0275fac=(()=>{let t;return function(i){return(t||(t=rt(n)))(i||n)}})();static \u0275cmp=I({type:n,selectors:[["nz-message"]],inputs:{instance:"instance"},outputs:{destroyed:"destroyed"},exportAs:["nzMessage"],features:[G],decls:9,vars:9,consts:[[1,"ant-message-notice",3,"mouseenter","mouseleave"],[1,"ant-message-notice-content"],[1,"ant-message-custom-content"],["nzType","check-circle"],["nzType","info-circle"],["nzType","exclamation-circle"],["nzType","close-circle"],["nzType","loading"],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML"]],template:function(o,i){if(o&1&&(c(0,"div",0),b("@moveUpMotion.done",function(l){return i.animationStateChanged.next(l)})("mouseenter",function(){return i.onEnter()})("mouseleave",function(){return i.onLeave()}),c(1,"div",1)(2,"div",2),f(3,ee,1,0,"nz-icon",3)(4,ne,1,0,"nz-icon",4)(5,oe,1,0,"nz-icon",5)(6,ie,1,0,"nz-icon",6)(7,re,1,0,"nz-icon",7)(8,ae,2,1,"ng-container",8),s()()()),o&2){let r;_("@moveUpMotion",i.instance.state),a(2),gt("ant-message-"+i.instance.type),a(),p((r=i.instance.type)==="success"?3:r==="info"?4:r==="warning"?5:r==="error"?6:r==="loading"?7:-1),a(5),_("nzStringTemplateOutlet",i.instance.content)("nzStringTemplateOutletContext",_t(6,te,i,i.instance.options==null?null:i.instance.options.nzData))}},dependencies:[j,St,kt,zt],encapsulation:2,data:{animation:[Rt]},changeDetection:0})}return n})(),H="message",ge={nzAnimate:!0,nzDuration:3e3,nzMaxStack:7,nzPauseOnHover:!0,nzTop:24,nzDirection:"ltr"},Qt=(()=>{class n extends le{dir=this.nzConfigService.getConfigForComponent(H)?.nzDirection||"ltr";top;constructor(){super(),this.updateConfig()}subscribeConfigChange(){this.nzConfigService.getConfigChangeEventForComponent(H).pipe(C(this.destroy$)).subscribe(()=>{this.updateConfig(),this.dir=this.nzConfigService.getConfigForComponent(H)?.nzDirection||this.dir})}updateConfig(){this.config=z(z(z({},ge),this.config),this.nzConfigService.getConfigForComponent(H)),this.top=Mt(this.config.nzTop),this.cdr.markForCheck()}static \u0275fac=function(o){return new(o||n)};static \u0275cmp=I({type:n,selectors:[["nz-message-container"]],exportAs:["nzMessageContainer"],features:[G],decls:3,vars:4,consts:[[1,"ant-message"],[3,"instance"],[3,"destroyed","instance"]],template:function(o,i){o&1&&(c(0,"div",0),N(1,se,1,1,"nz-message",1,ut),s()),o&2&&(dt("top",i.top),D("ant-message-rtl",i.dir==="rtl"),a(),L(i.instances))},dependencies:[Gt],encapsulation:2,changeDetection:0})}return n})(),qt=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=lt({type:n});static \u0275inj=it({imports:[Qt,Gt]})}return n})(),Yt=(()=>{class n extends J{componentPrefix="message-";constructor(t,o){super(t,o)}success(t,o){return this.createInstance({type:"success",content:t},o)}error(t,o){return this.createInstance({type:"error",content:t},o)}info(t,o){return this.createInstance({type:"info",content:t},o)}warning(t,o){return this.createInstance({type:"warning",content:t},o)}loading(t,o){return this.createInstance({type:"loading",content:t},o)}create(t,o,i){return this.createInstance({type:t,content:o},i)}createInstance(t,o){return this.container=this.withContainer(Qt),this.container.create(et(z({},t),{createdAt:new Date,messageId:this.getInstanceId(),options:o}))}static \u0275fac=function(o){return new(o||n)(X(At),X(at))};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var V=class n{http=m(B);translateService=m(w);apiUrl=`${U.apiUrl}/gc-product`;getProductDetails(e,t="KWT"){let o=this.translateService.currentLang||"en",i=new $({lang:o}),r={product_id:e,country_code:t};return this.http.post(this.apiUrl,r,{headers:i}).pipe(R(l=>{if(l.status==="Success"&&l.data&&l.data.length>0){let u=l.data[0];return{id:u.id,title:o==="ar"?u.web_name_ar:u.web_name_en,image:u.image,price:u.product_price,originalPrice:u.product_price_before||u.product_price,currency:u.currencyname,currencySymbol:u.symbol,countryName:u.countryname,countryCode:u.country_code,discount:u.offer,isBestSeller:u.best_seller===1,categoryId:u.category_id}}return null}),F(l=>(console.error("Error fetching product details:",l),A(null))))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var W=class n{http=m(B);translateService=m(w);apiUrl=`${U.apiUrl}/gc-products`;getProductsByCategory(e,t="KWT"){let o=this.translateService.currentLang||"en",i=new $({lang:o}),r={category_id:e,country_code:t};return this.http.post(this.apiUrl,r,{headers:i}).pipe(R(l=>l.status==="Success"&&l.data&&l.data.length>0?l.data.map(u=>this.transformProductData(u,o)):[]),F(l=>(console.error("Error fetching products by category:",l),A([]))))}transformProductData(e,t){return{id:e.id,title:t==="ar"?e.web_name_ar:e.web_name_en,image:e.image,price:e.product_price,originalPrice:e.product_price_before||e.product_price,currency:e.currencyname,currencySymbol:e.symbol,countryName:e.countryname,countryCode:e.country_code,discount:e.offer,isBestSeller:e.best_seller===1,categoryId:e.category_id}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=k({token:n,factory:n.\u0275fac,providedIn:"root"})};var ue=["classificationsScroll"],me=["amountsScroll"],pe=()=>[24,24],Jt=(n,e)=>e.id;function he(n,e){n&1&&(c(0,"div",3),h(1,"nz-spin",5),s())}function _e(n,e){if(n&1){let t=O();c(0,"div",4)(1,"h3"),d(2,"Failed to load product details"),s(),c(3,"button",6),b("click",function(){v(t);let i=g();return M(i.loadProductDetails())}),d(4,"Try Again"),s()()}}function fe(n,e){n&1&&(c(0,"div",16),h(1,"nz-spin",28),s())}function Ce(n,e){n&1&&(c(0,"div",17)(1,"p"),d(2,"Failed to load classifications"),s()())}function be(n,e){if(n&1&&(c(0,"div",32),h(1,"img",35),s()),n&2){let t=g().$implicit,o=g(3);a(),_("src",t.image,E)("alt",o.getSubcategoryName(t))}}function ye(n,e){n&1&&(c(0,"div",34),d(1,"\u2713"),s())}function Pe(n,e){if(n&1){let t=O();c(0,"div",31),b("click",function(){let i=v(t).$implicit,r=g(3);return M(r.selectSubcategory(i.id))}),f(1,be,2,2,"div",32),c(2,"div",33)(3,"span"),d(4),s()(),f(5,ye,2,0,"div",34),s()}if(n&2){let t=e.$implicit,o=g(3);D("selected",o.selectedSubcategory===t.id),a(),p(t.image?1:-1),a(3),y(o.getSubcategoryName(t)),a(),p(o.selectedSubcategory===t.id?5:-1)}}function ve(n,e){if(n&1&&(c(0,"div",18,0)(2,"div",29),N(3,Pe,6,5,"div",30,Jt),s()()),n&2){let t=g(2);a(3),L(t.subcategories)}}function Me(n,e){n&1&&(c(0,"div",19)(1,"p"),d(2,"No classifications available"),s()())}function Oe(n,e){n&1&&(c(0,"div",20),h(1,"nz-spin",28),s())}function xe(n,e){n&1&&(c(0,"div",21)(1,"p"),d(2,"Failed to load card amounts"),s()())}function Se(n,e){n&1&&h(0,"img",39)}function ze(n,e){if(n&1&&h(0,"img",40),n&2){let t=g(5);_("src","assets/svgs/"+(t.isDarkTheme?"Riyal_white.svg":"Riyal.svg"),E)}}function ke(n,e){if(n&1&&f(0,Se,1,0,"img",39)(1,ze,1,1,"img",40),n&2){let t=g().$implicit,o=g(3);p(o.selectedAmount===t.price?0:1)}}function Te(n,e){if(n&1&&d(0),n&2){let t=g().$implicit;T(" ",t.currencySymbol," ")}}function we(n,e){if(n&1){let t=O();c(0,"div",38),b("click",function(){let i=v(t).$implicit,r=g(3);return M(r.selectAmount(i))}),d(1),f(2,ke,2,1)(3,Te,1,1),s()}if(n&2){let t=e.$implicit,o=g(3);D("selected",o.selectedAmount===t.price),a(),T(" ",t.price," "),a(),p(t.countryCode==="SAU"?2:3)}}function Ee(n,e){if(n&1&&(c(0,"div",18,1)(2,"div",36),N(3,we,4,4,"div",37,Jt),s()()),n&2){let t=g(2);a(3),L(t.availableAmounts)}}function Ie(n,e){n&1&&(c(0,"div",22)(1,"p"),d(2,"No card amounts available"),s()())}function De(n,e){if(n&1&&h(0,"img",41),n&2){let t=g(3);_("src","assets/svgs/"+(t.isDarkTheme?"Riyal_white.svg":"Riyal.svg"),E)}}function Ne(n,e){if(n&1&&d(0),n&2){let t=g(3);T(" ",t.selectedCurrency," ")}}function Le(n,e){if(n&1&&(c(0,"div",23)(1,"h2"),d(2),f(3,De,1,1,"img",41)(4,Ne,1,1),s()()),n&2){let t=g(2);a(2),T(" ",t.selectedAmount*t.exchangeRate," "),a(),p((t.selectedProduct==null?null:t.selectedProduct.countryCode)==="SAU"?3:4)}}function Ae(n,e){if(n&1){let t=O();h(0,"app-breadcrumb",7),c(1,"div",8)(2,"div",9)(3,"div",10),h(4,"img",11),s(),c(5,"button",12),d(6,"How to use"),s()(),c(7,"div",9)(8,"h1",13),d(9),s(),c(10,"div",14)(11,"h2",15),d(12,"Classifications"),s(),f(13,fe,2,0,"div",16)(14,Ce,3,0,"div",17)(15,ve,5,0,"div",18)(16,Me,3,0,"div",19),s(),c(17,"div",14)(18,"h2",15),d(19,"Card Amount"),s(),f(20,Oe,2,0,"div",20)(21,xe,3,0,"div",21)(22,Ee,5,0,"div",18)(23,Ie,3,0,"div",22),s(),f(24,Le,5,2,"div",23),c(25,"div",24)(26,"button",25),b("click",function(){v(t);let i=g();return M(i.buyNow())}),d(27," Buy Now "),s()()(),c(28,"div",9)(29,"div",26)(30,"div",27)(31,"h3"),d(32),x(33,"translate"),s(),c(34,"p"),d(35),x(36,"translate"),s()(),c(37,"div",27)(38,"h3"),d(39),x(40,"translate"),s(),c(41,"p"),d(42),x(43,"translate"),s()(),c(44,"div",27)(45,"h3"),d(46),x(47,"translate"),s(),c(48,"p"),d(49),x(50,"translate"),s()()()()()}if(n&2){let t=g();_("breadcrumbs",t.breadcrumbs),a(),_("nzGutter",ht(44,pe)),a(),_("nzXs",24)("nzSm",24)("nzMd",6)("nzLg",5),a(2),_("src",t.productImage,E)("alt",(t.product==null?null:t.product.title)||"Product"),a(3),_("nzXs",24)("nzSm",24)("nzMd",10)("nzLg",11),a(2),T(" ",(t.product==null?null:t.product.title)||t.selectedSubcategoryName||"Product Details"," "),a(4),p(t.loadingSubcategories?13:-1),a(),p(!t.loadingSubcategories&&t.subcategoriesError?14:-1),a(),p(!t.loadingSubcategories&&!t.subcategoriesError&&t.subcategories.length>0?15:-1),a(),p(!t.loadingSubcategories&&!t.subcategoriesError&&t.subcategories.length===0?16:-1),a(4),p(t.loadingProducts?20:-1),a(),p(!t.loadingProducts&&t.productsError?21:-1),a(),p(!t.loadingProducts&&!t.productsError&&t.availableAmounts.length>0?22:-1),a(),p(!t.loadingProducts&&!t.productsError&&t.availableAmounts.length===0?23:-1),a(),p(t.selectedAmount?24:-1),a(4),_("nzXs",24)("nzSm",24)("nzMd",8)("nzLg",8),a(4),y(S(33,32,"PRODUCT_DETAILS.INFO_CARDS.PAYMENT.TITLE")),a(3),y(S(36,34,"PRODUCT_DETAILS.INFO_CARDS.PAYMENT.DESCRIPTION")),a(4),y(S(40,36,"PRODUCT_DETAILS.INFO_CARDS.OFFERS.TITLE")),a(3),y(S(43,38,"PRODUCT_DETAILS.INFO_CARDS.OFFERS.DESCRIPTION")),a(4),y(S(47,40,"PRODUCT_DETAILS.INFO_CARDS.SPEED.TITLE")),a(3),y(S(50,42,"PRODUCT_DETAILS.INFO_CARDS.SPEED.DESCRIPTION"))}}var Zt=class n{route=m(bt);productService=m(V);subcategoriesService=m(Kt);productsService=m(W);categoriesService=m(Bt);message=m(Yt);translateService=m(w);countryFacade=m(Nt);destroy$=new P;classificationsScrollRef;amountsScrollRef;productId="";categoryId="";subcategoryId="";product=null;productImage="assets/images/placeholder-card.png";isLoading=!0;hasError=!1;subcategories=[];loadingSubcategories=!1;subcategoriesError=!1;products=[];loadingProducts=!1;productsError=!1;selectedCountry="KWT";selectedCurrency="KWD";selectedAmount=10;selectedProduct=null;selectedSubcategory=null;exchangeRate=1;isDarkTheme=!1;availableAmounts=[];breadcrumbs=[];categoryName="";subcategoryName="";get selectedSubcategoryName(){if(!this.selectedSubcategory)return null;let e=this.subcategories.find(t=>t.id===this.selectedSubcategory);return e?`${this.categoryName} ${this.getSubcategoryName(e)} `:null}ngOnInit(){this.isDarkTheme=document.body.classList.contains("dark-theme"),new MutationObserver(t=>{t.forEach(o=>{o.attributeName==="class"&&(this.isDarkTheme=document.body.classList.contains("dark-theme"))})}).observe(document.body,{attributes:!0}),this.countryFacade.selectedCountryCode$.pipe(C(this.destroy$)).subscribe(t=>{t&&(this.selectedCountry=t,this.productId?this.loadProductDetails():this.selectedSubcategory&&this.loadProductsByCategory(this.selectedSubcategory))}),this.route.paramMap.pipe(C(this.destroy$)).subscribe(t=>{t.has("id")?(this.productId=t.get("id")||"",this.loadProductDetails()):t.has("categoryId")?(this.categoryId=t.get("categoryId")||"",t.has("subcategoryId")?(this.subcategoryId=t.get("subcategoryId")||"",this.handleSubcategorySelection()):this.handleCategorySelection()):(this.productId="168",this.loadProductDetails())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngAfterViewInit(){this.setupHorizontalScroll()}buyNow(){window.open("https://apps.apple.com/us/app/zain-tawseel/id1042615361","_blank")}handleCategorySelection(){this.isLoading=!0,this.hasError=!1,this.loadSubcategories(parseInt(this.categoryId),!0),this.setupCategoryBreadcrumbs()}handleSubcategorySelection(){this.isLoading=!0,this.hasError=!1,this.loadSubcategories(parseInt(this.categoryId),!1),this.setupSubcategoryBreadcrumbs()}setupHorizontalScroll(){setTimeout(()=>{this.classificationsScrollRef&&this.enableDragScroll(this.classificationsScrollRef.nativeElement),this.amountsScrollRef?.nativeElement&&this.enableDragScroll(this.amountsScrollRef.nativeElement)},500)}enableDragScroll(e){if(!e)return;let t=!1,o,i;e.addEventListener("mousedown",r=>{t=!0,e.classList.add("active"),o=r.pageX-e.offsetLeft,i=e.scrollLeft,r.preventDefault()}),e.addEventListener("mouseleave",()=>{t=!1,e.classList.remove("active")}),e.addEventListener("mouseup",()=>{t=!1,e.classList.remove("active")}),e.addEventListener("mousemove",r=>{if(!t)return;r.preventDefault();let u=(r.pageX-e.offsetLeft-o)*2;e.scrollLeft=i-u}),e.addEventListener("touchstart",r=>{r.touches.length===1&&(t=!0,e.classList.add("active"),o=r.touches[0].pageX-e.offsetLeft,i=e.scrollLeft)},{passive:!1}),e.addEventListener("touchend",()=>{t=!1,e.classList.remove("active")}),e.addEventListener("touchcancel",()=>{t=!1,e.classList.remove("active")}),e.addEventListener("touchmove",r=>{if(t&&r.touches.length===1){let u=(r.touches[0].pageX-e.offsetLeft-o)*2;e.scrollLeft=i-u,r.preventDefault()}},{passive:!1})}loadProductDetails(){this.isLoading=!0,this.hasError=!1,this.productService.getProductDetails(this.productId,this.selectedCountry).subscribe({next:e=>{e?(this.product=e,this.productImage=e.image,this.selectedCurrency=e.currencySymbol,e.price&&(this.selectedAmount=e.price),this.isLoading=!1,this.setupProductBreadcrumbs(e),this.loadSubcategories(e.categoryId,!0)):this.handleError()},error:()=>{this.handleError()}})}loadSubcategories(e,t){if(!e){this.isLoading=!1,this.hasError=!0;return}this.loadingSubcategories=!0,this.subcategoriesError=!1;let o=this.translateService.currentLang||"en";this.categoriesService.getCategories().pipe(C(this.destroy$)).subscribe({next:i=>{let r=i.find(l=>l.id===e);r&&(this.categoryName=r.name),this.subcategoriesService.getSubcategories(e,this.selectedCountry,o).subscribe({next:l=>{this.subcategories=l,this.loadingSubcategories=!1,l.length>0?t?this.selectSubcategory(l[0].id):this.subcategoryId?this.selectSubcategory(parseInt(this.subcategoryId)):this.selectSubcategory(l[0].id):this.isLoading=!1,setTimeout(()=>this.setupHorizontalScroll(),300)},error:l=>{console.error("Error loading subcategories:",l),this.subcategoriesError=!0,this.loadingSubcategories=!1,this.isLoading=!1}})},error:i=>{console.error("Error fetching category name:",i),this.fetchSubcategoriesOnly(e,t,o)}})}fetchSubcategoriesOnly(e,t,o){this.subcategoriesService.getSubcategories(e,this.selectedCountry,o).subscribe({next:i=>{this.subcategories=i,this.loadingSubcategories=!1,i.length>0?t?this.selectSubcategory(i[0].id):this.subcategoryId?this.selectSubcategory(parseInt(this.subcategoryId)):this.selectSubcategory(i[0].id):this.isLoading=!1,setTimeout(()=>this.setupHorizontalScroll(),300)},error:i=>{console.error("Error loading subcategories:",i),this.subcategoriesError=!0,this.loadingSubcategories=!1,this.isLoading=!1}})}loadProductsByCategory(e){if(!e){this.loadingProducts=!1,this.productsError=!0,this.isLoading=!1;return}this.loadingProducts=!0,this.productsError=!1,this.productsService.getProductsByCategory(e.toString(),this.selectedCountry).subscribe({next:t=>{this.products=t,this.loadingProducts=!1,t.length>0&&(this.availableAmounts=t,this.selectedProduct=t[0],this.selectedAmount=t[0].price,this.selectedCurrency=t[0].currencySymbol),this.isLoading=!1},error:t=>{console.error("Error loading products:",t),this.productsError=!0,this.loadingProducts=!1,this.isLoading=!1}})}handleError(){this.isLoading=!1,this.hasError=!0,this.message.error("Failed to load product details. Please try again later.")}selectCountry(e){this.selectedCountry!==e&&(this.selectedCountry=e,this.productId?this.loadProductDetails():this.selectedSubcategory&&this.loadProductsByCategory(this.selectedSubcategory))}selectAmount(e){this.selectedAmount=e.price,this.selectedProduct=e,this.selectedCurrency=e.currencySymbol}selectSubcategory(e){if(this.selectedSubcategory===e)return;this.selectedSubcategory=e;let t=this.subcategories.find(o=>o.id===e);t&&(t.image&&t.image.trim()!==""?this.productImage=t.image:this.productImage="assets/images/placeholder-card.png"),this.loadProductsByCategory(e)}getSubcategoryName(e){return(this.translateService.currentLang||"en")==="ar"?e.web_name_ar:e.web_name_en}setupProductBreadcrumbs(e){this.breadcrumbs=[],this.breadcrumbs.push({label:e.title})}setupCategoryBreadcrumbs(){this.breadcrumbs=[],this.categoriesService.getCategories().pipe(C(this.destroy$)).subscribe({next:e=>{let t=e.find(o=>o.id===parseInt(this.categoryId));t&&(this.categoryName=t.name,this.breadcrumbs.push({label:this.categoryName,url:`/category/${this.categoryId}`}))},error:e=>{console.error("Error fetching category name:",e)}})}setupSubcategoryBreadcrumbs(){this.breadcrumbs=[],this.categoriesService.getCategories().pipe(C(this.destroy$)).subscribe({next:e=>{let t=e.find(o=>o.id===parseInt(this.categoryId));if(t){this.categoryName=t.name,this.breadcrumbs.push({label:this.categoryName,url:`/category/${this.categoryId}`});let o=this.translateService.currentLang||"en";this.subcategoriesService.getSubcategories(parseInt(this.categoryId),this.selectedCountry,o).pipe(C(this.destroy$)).subscribe({next:i=>{let r=i.find(l=>l.id===parseInt(this.subcategoryId));r&&(this.subcategoryName=o==="ar"?r.web_name_ar:r.web_name_en,this.breadcrumbs.push({label:`${this.categoryName} ${this.subcategoryName}`,url:`/category/${this.categoryId}/${this.subcategoryId}`}))},error:i=>{console.error("Error fetching subcategory name:",i)}})}},error:e=>{console.error("Error fetching category name:",e)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["app-product-details"]],viewQuery:function(t,o){if(t&1&&(Q(ue,5),Q(me,5)),t&2){let i;q(i=Y())&&(o.classificationsScrollRef=i.first),q(i=Y())&&(o.amountsScrollRef=i.first)}},decls:4,vars:3,consts:[["classificationsScroll",""],["amountsScroll",""],[1,"product-details-container"],[1,"loading-container"],[1,"error-container"],["nzTip","Loading..."],["nz-button","","nzType","primary",3,"click"],[3,"breadcrumbs"],["nz-row","",3,"nzGutter"],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg"],[1,"product-card"],["onerror","this.src='assets/images/placeholder-card.png'",1,"product-image",3,"src","alt"],["nz-button","","nzBlock","",1,"how-to-use-btn"],[1,"product-title"],[1,"selection-section"],[1,"section-title"],[1,"subcategories-loading"],[1,"subcategories-error"],[1,"horizontal-scroll-container"],[1,"no-subcategories"],[1,"products-loading"],[1,"products-error"],[1,"no-products"],[1,"total-price"],[1,"action-buttons"],["nz-button","","nzType","primary","nzSize","large",1,"buy-now-btn",3,"click"],[1,"info-cards-column"],[1,"info-card"],["nzSimple",""],[1,"classifications-options"],[1,"classification-option",3,"selected"],[1,"classification-option",3,"click"],[1,"icon-container"],[1,"classification-text"],[1,"checkmark"],["onerror","this.src='assets/images/placeholder-card.png'",3,"src","alt"],[1,"amount-options"],[1,"amount-option",3,"selected"],[1,"amount-option",3,"click"],["src","assets/svgs/Riyal_white.svg","alt","SAR",1,"currency-icon"],["alt","SAR",1,"currency-icon",3,"src"],["alt","SAR",1,"currency-icon","total-price-icon",3,"src"]],template:function(t,o){t&1&&(c(0,"div",2),f(1,he,2,0,"div",3)(2,_e,5,0,"div",4)(3,Ae,51,45),s()),t&2&&(a(),p(o.isLoading?1:-1),a(),p(!o.isLoading&&o.hasError?2:-1),a(),p(!o.isLoading&&!o.hasError?3:-1))},dependencies:[ft,Ft,yt,vt,Pt,It,Et,Tt,wt,j,$t,Ht,Ut,jt,Dt,qt,Xt,Wt,Ct,Vt],styles:[".product-details-container[_ngcontent-%COMP%]{padding:24px;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif}body.dark-theme[_nghost-%COMP%]   .product-details-container[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .product-details-container[_ngcontent-%COMP%]{color:#ffffffd9}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .subcategories-loading[_ngcontent-%COMP%], .subcategories-error[_ngcontent-%COMP%], .no-subcategories[_ngcontent-%COMP%], .products-loading[_ngcontent-%COMP%], .products-error[_ngcontent-%COMP%], .no-products[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:20px 0;gap:20px}.loading-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .subcategories-loading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .subcategories-error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .no-subcategories[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .products-loading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .products-error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .no-products[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:16px}body.dark-theme[_nghost-%COMP%]   .loading-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .loading-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .subcategories-loading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .subcategories-loading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .subcategories-error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .subcategories-error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .no-subcategories[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-subcategories[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .products-loading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .products-loading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .products-error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .products-error[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .no-products[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .no-products[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fffffff2}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .subcategories-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .subcategories-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .no-subcategories[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .products-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .products-error[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .no-products[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.product-title[_ngcontent-%COMP%]{font-size:28px;font-weight:600;margin-bottom:24px}body.dark-theme[_nghost-%COMP%]   .product-title[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .product-title[_ngcontent-%COMP%]{color:#fffffff2}.product-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;display:flex;justify-content:center;align-items:center;position:relative;box-shadow:0 2px 8px #0000001a;margin-bottom:16px;width:100%;overflow:hidden}body.dark-theme[_nghost-%COMP%]   .product-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .product-card[_ngcontent-%COMP%]{background-color:#1f2b50;box-shadow:0 2px 8px #0000004d}.product-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:contain;display:block}.how-to-use-btn[_ngcontent-%COMP%]{background-color:#e1e3f0;border:none;color:#000000d9;font-weight:500;height:44px}body.dark-theme[_nghost-%COMP%]   .how-to-use-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .how-to-use-btn[_ngcontent-%COMP%]{background-color:#273459;color:#ffffffd9}.section-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;margin-bottom:16px}body.dark-theme[_nghost-%COMP%]   .section-title[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .section-title[_ngcontent-%COMP%]{color:#fffffff2}.selection-section[_ngcontent-%COMP%]{margin-bottom:24px}.horizontal-scroll-container[_ngcontent-%COMP%]{overflow-x:auto;overflow-y:hidden;white-space:nowrap;-webkit-overflow-scrolling:touch;cursor:grab;padding-bottom:10px}.horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{height:4px}.horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:4px}body.dark-theme[_nghost-%COMP%]   .horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track, body.dark-theme   [_nghost-%COMP%]   .horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#273459}.horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}body.dark-theme[_nghost-%COMP%]   .horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb, body.dark-theme   [_nghost-%COMP%]   .horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#2d3a6a}.horizontal-scroll-container.active[_ngcontent-%COMP%]{cursor:grabbing}.amount-option[_ngcontent-%COMP%], .classification-option[_ngcontent-%COMP%]{border-radius:10px;border:1px solid #e8e8e8;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;position:relative;background-color:#fff}body.dark-theme[_nghost-%COMP%]   .amount-option[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .amount-option[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .classification-option[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .classification-option[_ngcontent-%COMP%]{background-color:#e1e3f04d;border-color:#303030;color:#ffffffd9}.selected.amount-option[_ngcontent-%COMP%], .selected.classification-option[_ngcontent-%COMP%]{border:2px solid #182245}body.dark-theme[_nghost-%COMP%]   .selected.amount-option[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .selected.amount-option[_ngcontent-%COMP%], body.dark-theme[_nghost-%COMP%]   .selected.classification-option[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .selected.classification-option[_ngcontent-%COMP%]{border-color:#2d3a6a}.classifications-options[_ngcontent-%COMP%]{display:inline-flex;gap:16px;padding:4px;width:max-content}.classification-option[_ngcontent-%COMP%]{min-width:140px;height:90px;white-space:normal;flex-direction:row;padding:10px 16px;justify-content:flex-start;text-align:left;gap:12px;width:200px}.classification-option.selected[_ngcontent-%COMP%]{background-color:#1a2b47;color:#fff}body.dark-theme[_nghost-%COMP%]   .classification-option.selected[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .classification-option.selected[_ngcontent-%COMP%]{background-color:#1a2b47}.classification-option[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]{width:50px;height:50px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.classification-option[_ngcontent-%COMP%]   .icon-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain}.classification-option[_ngcontent-%COMP%]   .classification-text[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center}.classification-option[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px;font-weight:600;text-align:left;display:block;white-space:normal;word-break:break-word;line-height:1.2;overflow:hidden;text-overflow:ellipsis}.classification-option[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;transform:none;width:20px;height:20px;background-color:#4cd137;color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px}body.dark-theme[_nghost-%COMP%]   .classification-option[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .classification-option[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{background-color:#4cd137}.amount-options[_ngcontent-%COMP%]{display:inline-flex;gap:16px;padding:4px}.amount-option[_ngcontent-%COMP%]{min-width:100px;height:60px;font-size:15px;font-weight:500;white-space:normal}.amount-option.selected[_ngcontent-%COMP%]{background-color:#182245;color:#fff}body.dark-theme[_nghost-%COMP%]   .amount-option.selected[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .amount-option.selected[_ngcontent-%COMP%]{background-color:#2d3a6a}.amount-option[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%]{display:inline-block;height:16px;width:auto;margin-left:2px;vertical-align:middle}.total-price[_ngcontent-%COMP%]{margin:24px 0}.total-price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;font-weight:600;color:#38b000}body.dark-theme[_nghost-%COMP%]   .total-price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .total-price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#4cd137}.total-price[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   .currency-icon[_ngcontent-%COMP%]{width:26px;height:auto;margin-left:4px;vertical-align:middle}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:32px}.action-buttons[_ngcontent-%COMP%]   .buy-now-btn[_ngcontent-%COMP%]{flex:1;height:50px;font-size:18px;background-color:#182245;border-color:#182245}body.dark-theme[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .buy-now-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .buy-now-btn[_ngcontent-%COMP%]{background-color:#2d3a6a;border-color:#2d3a6a}.action-buttons[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{width:50px;height:50px;padding:0;display:flex;align-items:center;justify-content:center;background-color:#e1e3f0;border:none;color:#000000d9}body.dark-theme[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]{background-color:#273459;color:#ffffffd9}.action-buttons[_ngcontent-%COMP%]   .add-to-cart-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px}.info-cards-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;height:100%}.info-card[_ngcontent-%COMP%]{padding:16px;border-radius:10px;box-shadow:0 2px 8px #0000000d;background-color:#fff}body.dark-theme[_nghost-%COMP%]   .info-card[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .info-card[_ngcontent-%COMP%]{background-color:#e1e3f080;box-shadow:0 2px 8px #0000004d}.info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600;margin-bottom:8px}body.dark-theme[_nghost-%COMP%]   .info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .info-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#182245}.info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#818181;margin:0}body.dark-theme[_nghost-%COMP%]   .info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], body.dark-theme   [_nghost-%COMP%]   .info-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#000000d9}@media (max-width: 768px){.horizontal-scroll-container[_ngcontent-%COMP%]{-webkit-overflow-scrolling:touch;overflow-x:scroll}.horizontal-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.classification-option[_ngcontent-%COMP%], .amount-option[_ngcontent-%COMP%]{min-width:120px}.info-card[_ngcontent-%COMP%]{margin-bottom:16px}}  app-breadcrumb .breadcrumb-container{background-color:transparent;margin-bottom:16px;border-radius:4px;padding:8px 0}"]})};export{Zt as ProductDetailsComponent};
